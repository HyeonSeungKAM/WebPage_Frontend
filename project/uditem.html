<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>물품등록2</title>
    <!-- item2.html은 p36 자바스크립트 학습용으로 만들어짐 -->
    <style>

    </style>
</head>
<body>
    <div>
        <input tpye="text" id="iname" /><br />
        <input tpye="number" id="price" /><br />
        <img src="images/noimage.jpg" style="width:100px; height:100px;" id="img" />
        <input type="file" onchange="handleImage(this)" /><br />

        <hr />

        <!-- 기본 이미지 클릭 시 이미지 선택창이 나타나도록 함 -->
        <!-- <input type='files'... /> 에서 display:none 이므로 "파일 선택 버튼이 나타나지 않음." -->
        <img src="images/noimage.jpg" 
            style="width:100px; height:100px; cursor: pointer;" 
            id="img1" onclick="clickImage()" />

        <input type="file" 
            onchange="handleImage1(this)" 
            style="display: none;" id="file1" /><br />


        <button onclick="insertAction()">물품등록</button>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        function insertAction() {
            if(iname.value.length < 1) {
                Swal.fire("물품명을 입력하세요.");
                iname.focus();
                return false
            }

            if(price.value.length < 1) {
                Swal.fire("가격을 입력하세요.");
                price.focus();
                return false
            }

            alert('물품 등록이 가능한 시점입니다.')
        }


        // 이미지 파일(정보 등) 선택 시 해당 파일로 바뀌는 함수( handleImage(this) ) 실행
        // 함수의 변수는 e로...
        function clickImage() {
            file1.click();
        }

        function handleImage1(e) {
            console.log(e.files);
            console.log(e.files.length); // 1이면 첨부됨, 0이면 첨부되지 않음(취소)
            if(e.files.length===1) {
                //첨부 했음 (실제 파일 정보를 이용하여 표시)
                img1.src=URL.createObjectURL(e.files[0])
            } 
            else if(e.files.length===0) {
                //첨부하지 않았음 (image 폴더에 있는 noimage.jpg를 표시)
                img1.src="images/noimage.jpg"
            }
        }
        
        function handleImage(e) {
            console.log(e.files);
            console.log(e.files.length); // 1이면 첨부됨, 0이면 첨부되지 않음(취소)
            if(e.files.length===1) {
                //첨부 했음 (실제 파일 정보를 이용하여 표시)
                //첨부 시 noimage파일에서 첨부된 이미지 파일로 변경됨.
                img.src=URL.createObjectURL(e.files[0])
            } 
            else if(e.files.length===0) {
                //첨부하지 않았음 (image 폴더에 있는 noimage.jpg를 표시)
                img.src="images/noimage.jpg"
            }
        }

    </script>

</body>
</html>